<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<body>
    <!-- Result fragment to be swapped in via HTMX -->
    <div th:fragment="result">
        <!-- Error state -->
        <div th:if="${!result.found()}" class="error-card">
            <div class="error-icon">ðŸ˜•</div>
            <p th:text="${result.errorMessage()}">Error message</p>
        </div>

        <!-- Success state -->
        <div th:if="${result.found()}" class="success-result">
            <!-- The Number -->
            <div class="number-display">
                <div class="number" th:text="${result.thorvaldsNumber()}">0</div>
                <div class="number-label">
                    <span th:if="${result.thorvaldsNumber() == 0}">ðŸŽ‰ You ARE Torvalds!</span>
                    <span th:if="${result.thorvaldsNumber() == 1}">repository away</span>
                    <span th:if="${result.thorvaldsNumber() > 1}">repositories away</span>
                </div>
            </div>

            <!-- The Path -->
            <div th:if="${result.thorvaldsNumber() > 0}" class="path-container">
                <h3>The Path</h3>
                <div class="path">
                    <div th:each="node, iter : ${result.pathNodes()}" class="path-step">
                        <!-- Developer Node -->
                        <div th:if="${node.type() == 'developer'}" class="node developer-node">
                            <div class="node-icon">ðŸ‘¤</div>
                            <a th:href="@{'https://github.com/' + ${node.displayName()}}"
                                th:text="${node.displayName()}" target="_blank" rel="noopener"
                                class="node-link">username</a>
                        </div>

                        <!-- Repository Node -->
                        <div th:if="${node.type() == 'repository'}" class="node repo-node">
                            <div class="node-icon">ðŸ“¦</div>
                            <a th:href="@{'https://github.com/' + ${node.displayName()}}"
                                th:text="${node.displayName()}" target="_blank" rel="noopener"
                                class="node-link">repo/name</a>
                            <div th:if="${node.totalCommits() != null}" class="node-facts">
                                <span th:text="${node.totalCommits()} + ' commits'">N commits</span>
                            </div>
                        </div>

                        <!-- Connector -->
                        <div th:if="${!iter.last}" class="connector">
                            <div class="connector-line"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>

</html>